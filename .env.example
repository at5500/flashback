# =============================================================================
# Database Configuration
# =============================================================================
#
# FlashBack supports three database configuration modes (in priority order):
#
# 1. EXTERNAL MODE: PostgreSQL on a separate database server
#    - Set EXTERNAL_DB_HOST to enable this mode
#    - All EXTERNAL_DB_* variables are REQUIRED
#    - Suitable for multi-server deployments, high availability
#
# 2. DOCKER MODE (default for Docker Compose): PostgreSQL in Docker
#    - DB_* variables are set automatically by docker-compose
#    - POSTGRES_PASSWORD should be set for security
#    - Suitable for single-server Docker deployments
#
# 3. LOCAL DEV MODE: For local development without Docker
#    - Uses storehaus.toml configuration file
#    - No environment variables needed
#    - Suitable for local Rust development
#
# =============================================================================

# PostgreSQL Configuration (for Docker Compose local database)
# These are used when running via docker-compose without external database
POSTGRES_DB=flashback
POSTGRES_USER=postgres
POSTGRES_PASSWORD=password  # CHANGE THIS! Use: make generate-secrets

# External Database Configuration (Optional)
# Uncomment and configure these variables to use an external database server.
# If EXTERNAL_DB_HOST is set, all other EXTERNAL_DB_* variables are REQUIRED.
#
# EXTERNAL_DB_HOST=db.example.com
# EXTERNAL_DB_PORT=5432
# EXTERNAL_DB_NAME=flashback
# EXTERNAL_DB_USER=flashback_user
# EXTERNAL_DB_PASSWORD=<use scripts/generate-secrets.sh>

# Optional: Database connection pool settings (applies to all modes)
# DB_MIN_CONNECTIONS=1
# DB_MAX_CONNECTIONS=10
# DB_CONNECTION_TIMEOUT=30
# DB_IDLE_TIMEOUT=600
# DB_MAX_LIFETIME=3600

# =============================================================================
# JWT Configuration
# =============================================================================
# SECURITY WARNING: Change JWT_SECRET in production!
# Use scripts/generate-secrets.sh to generate a secure secret.

JWT_SECRET=your_secret_key_change_in_production
JWT_EXPIRATION=2592000  # 30 days in seconds

# Backend Server Configuration
BACKEND_HOST=0.0.0.0
BACKEND_PORT=3000

# Frontend Server Configuration (for local development)
FRONTEND_HOST=0.0.0.0
FRONTEND_PORT=8080

# Logging
# LOG_LEVEL can be: trace, debug, info, warn, error
# If not set, defaults based on ENVIRONMENT:
#   - development: flashback_backend=debug, libraries=info
#   - production: flashback_backend=info, libraries=warn
# Can also be overridden with -v flags when running the backend:
#   -v     = info level
#   -vv    = debug level
#   -vvv   = trace level (maximum detail)
LOG_LEVEL=debug

# RUST_LOG can be used for fine-grained control (overrides LOG_LEVEL)
# Example: RUST_LOG=flashback_backend=debug,storehaus=info,watchtower=info
# RUST_LOG=info,flashback_backend=debug

# Frontend Logging
# VITE_LOG_LEVEL can be: error, warn, info, debug, trace
VITE_LOG_LEVEL=debug

# Docker Build Configuration
# Enable debug logging features for storehaus and watchtower during Docker build
# Set to 'true' for development, 'false' for production
ENABLE_DEBUG_LOGGING=true

# Environment (development, production)
ENVIRONMENT=development